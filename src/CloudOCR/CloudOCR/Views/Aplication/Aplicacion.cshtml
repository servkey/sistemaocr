@{
    ViewBag.Title = "Display";
}
@{
    string user = @User.Identity.Name;
}
@{
    CloudOCR.Models.ApplicationDbContext db = new CloudOCR.Models.ApplicationDbContext();
}

@using (Ajax.BeginForm("FileUpload", "Aplication", new AjaxOptions() { HttpMethod = "POST" }, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    <div class="container">
        <div class="content">
            <div class="row"  >
                <div class="col-md-2">
                    <br />
                    <div class="scrollable-table">
                        <table >
                            <tbody>
                                @foreach (var item in db.PicturesSet)
                                {
                                    <tr>
                                        <td> <img src="~/Content/Images/@item.flName" width="150" height="200" /></td>
                                    </tr>

                                }
                            </tbody>
                        </table>
                    </div>                    
                </div>
                <div class="col-md-6">
                    <div class="overhid">
                        <table border="1" width="500" height="600">
                            <tbody>
                                @foreach (var item in db.PicturesSet)
                                {
                                    <tr>
                                        <td> <img src="~/Content/Images/@item.flName" width="500" height="600" /></td>
                                    </tr>

                                }
                            </tbody>
                        </table>
                    </div>                    
                </div>
                <div class="col-md-4">
                            Seleccione las imágenes<br />
                            <input type="file" name="files" id="files" style="width: 100%;" multiple /><br>
                            <button type="submit" class="btn btn-primary"> Cargar Imágenes </button>
                            <div class="progress progress-striped active">
                                <div class="progress-bar" role="progressbar" style="width: 0%">
                                    <div class="sr-only">0%</div>
                                </div>
                            </div>
                            <div id="status"></div>
                </div>
           </div>
        </div>            
   </div>
    

    
}

<script>
    (function () {

        var bar = $('.progress-bar');
        var percent = $('.sr-only');
        var status = $('#status');

        $('form').ajaxForm({
            beforeSend: function () {
                status.empty();
                var percentVal = '0%';
                bar.width(percentVal)
                percent.html(percentVal);
            },
            uploadProgress: function (event, position, total, percentComplete) {
                var percentVal = percentComplete + '%';
                bar.width(percentVal)
                percent.html(percentVal);
            },
            success: function () {
                var percentVal = '100%';
                bar.width(percentVal)
                percent.html(percentVal);
            },
            complete: function (xhr) {
                status.html(xhr.responseText);
                $('.progress-bar').hide();
            }
        });

    })();
</script>